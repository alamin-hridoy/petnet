<div class="px-6 lg:px-32 py-10 shadow-md relative z-10 bg-white">
	<ul class="flex justify-end items-center space-x-4 mb-10">
		<li class="mr-auto">
			<a href="/dashboard/dsa-applicant-list" class="inline-flex text-petnetlightblue text-base items-center font-semibold">
				<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-4" fill="none"
																								 viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
																						  d="M10 19l-7-7m0 0l7-7m-7 7h18" />
				</svg>
				Back to List
			</a>
		</li>
		<li>
			<svg xmlns="http://www.w3.org/2000/svg" class="h-9 w-9" fill="none" viewBox="0 0 24 24"
																									  stroke="currentColor">
				<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
																					  d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
			</svg>
		</li>
		<li>
			{{ template "top-head-profile.html" dict "UserInfo" .User "CompanyName" "" .}}
		</li>
		<li>
			<div class="relative" id="topDropdownBox">
				<a href="javascript:;" onclick="toggleTopButton('openTopDropdown')">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
						viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
							d="M19 9l-7 7-7-7" />
					</svg>
				</a>
				<div class="absolute right-0 top-12 hidden" id="openTopDropdown">
					<div
						class="transform skew-y-12 skew-x-12 rotate-45 w-6 h-6 absolute ml-auto top-0 right-0 shadow bg-white z-10">
					</div>
					<div class="shadow-lg  absolute top-3 -right-5 rounded">
						<div class="relative z-20 p-3 w-36 bg-white rounded space-y-2">
							<a class="flex text-sm items-center" href="/profile">
								<svg class="mr-2" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" clip-rule="evenodd" d="M16 8C16 10.21 14.21 12 12 12C9.79 12 8 10.21 8 8C8 5.79 9.79 4 12 4C14.21 4 16 5.79 16 8ZM4 18C4 15.34 9.33 14 12 14C14.67 14 20 15.34 20 18V19C20 19.55 19.55 20 19 20H5C4.45 20 4 19.55 4 19V18Z" fill="#333333"/>
								</svg>
								Profile
							</a>
							<a href="/logout" class="flex text-sm">
								<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none"
									viewBox="0 0 24 24" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round"
										stroke-width="2"
										d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
								</svg>
								Logout
							</a>
						</div>
					</div>
				</div>
			</div>
		</li>
	</ul>
	<div class="mb-4 flex flex-wrap justify-between">
		<h2 class="text-5xl text-petnetblue mr-4 font-semibold">{{.BusinessInfo.CompanyName}}</h2>
		<div class="relative dropdown">

			<button
					class="dropdown-toggle relative w-52 py-3 bg-{{statusClass .Status}} text-center inline-flex items-center justify-center rounded font-bold text-sm" onclick="dropdownToggle(event)">
				{{if eq .Status "PendingDocuments"}}
				Pending Documents
				{{else}}
				{{.Status}} 
				{{end}}
					
				<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-12 -mr-16 {{if eq .Status "Completed"}} hidden {{end}}" fill="none"
																						  viewBox="0 0 24 24" stroke="currentColor">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
																						  d="M19 9l-7 7-7-7" />
				</svg>
			</button>
			<div id="modalDropDown" class="absolute right-0 top-12 dropdown-item hidden">
				
				<div class="transform skew-y-12 skew-x-12 rotate-45 w-6 h-6 absolute ml-auto top-0 right-0 shadow bg-white z-10 {{if eq .Status "Completed"}} hidden {{end}}">
				</div>
				
				<div class="shadow  absolute top-3 -right-5 rounded">
					<div class="relative z-20 pt-3 w-42 bg-white rounded flex flex-col">
						<form id="change-status" method="POST" action="/dashboard/change-status">
   	  					{{ .CSRFField }}
							<input id="status" type="hidden" name="Status" value="{{.Status}}">
							<input type="hidden" name="OrgID" value="{{.OrgID}}">
							{{if and (ne .Status "PendingDocuments") (ne .Status "Pending") (ne .Status "Completed")}}
							<option value="3" class="px-6 hover:bg-petnetblue hover:bg-opacity-20 py-2" onclick="changeStatus(event)">Pending</option>
							{{end}}
							{{if and (ne .Status "PendingDocuments") (ne .Status "Completed") (ne .Status "Rejected")}}
							<option value="5" class="px-6 hover:bg-petnetblue hover:bg-opacity-20 py-2" onclick="changeStatus(event)">Pending Documents</option>
							{{end}}
							{{if and (.AllDocsSubmitted) (ne .Status "Pending") (ne .Status "Completed") (ne .Status "Rejected")}}
							<option value="2" class="px-6 hover:bg-petnetblue hover:bg-opacity-20 py-2" onclick="changeStatus(event)">Completed</option>
							{{end}}
							{{if and (.AllDocsSubmitted) (ne .Status "Accepted") (ne .Status "Rejected")}}
							<option value="1" class="px-6 hover:bg-petnetblue hover:bg-opacity-20 py-2" onclick="changeStatus(event)">Accepted</option>
							{{end}}
							{{if and (ne .Status "Completed") (ne .Status "Rejected")}}
							<option value="4" class="px-6 hover:bg-petnetblue hover:bg-opacity-20 py-2" onclick="changeStatus(event)">Rejected</option>
							{{end}}
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	function dropdownToggle(event) {
		let targetItem = event.target;
		while (!targetItem.classList.contains('dropdown-toggle')) {
				targetItem = targetItem.parentElement;
			}
		targetItem = targetItem.nextElementSibling;

		if (targetItem.classList.contains('hidden')) {
				targetItem.classList.remove("hidden");
			} else {
					targetItem.classList.add("hidden");
				}
		let x = document.getElementsByClassName("dropdown-item");
		for (let i = 0; i < x.length; i++) {
				if(x[i]!=targetItem){
						x[i].classList.add("hidden")
					}
			} 
	}
	function changeStatus(event) {
		let targetItem = event.target;
		let status = targetItem.value
		if(status == 1){
			document.getElementById('dsaAplicantPop').classList.remove('hidden')
			document.getElementById('modalDropDown').classList.add('hidden')
			document.getElementById('statusAccept').value = status;
		}else{
			document.getElementById('status').value = status;
			document.getElementById('change-status').submit()
		}
	}
	function toggleTopButton(id) {
        let getDropdownItem = document.getElementById(id)
        let isHiddenClass = getDropdownItem.classList.contains('hidden');
        if (!isHiddenClass) {
            getDropdownItem.classList.add("hidden");
        } else {
            getDropdownItem.classList.remove("hidden");
        }
    }
</script>
